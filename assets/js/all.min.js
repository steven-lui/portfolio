let regex={fname:/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/gm,sname:/^[a-zA-Z]+(([',. -][a-zA-Z ])?[a-zA-Z]*)*$/gm,email:/(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/,subject:/.*/,message:/.*/};const checkError=e=>{if(0!=e.length)throw e},replaceSpecialChars=e=>e.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/\-\-+/g,"-").replace(/(^-+|-+$)/g,"").replace(/[&"'<>]/g,""),addRequired=e=>{let t=e.attr("placeholder"),a=`<label for="${e.attr("id")}" style="color:red;"}">Please fill out your ${t.substring(0,t.length-1).toLowerCase()} correctly`;e.addClass("required"),e.before(a)};function sendForm(){$('.form-control:not("#message")').each((function(){let e=$(this);e.removeClass("required"),$(`label[for=${e.attr("id")}]`).remove()}));let e=[];try{$(".form-control:not(#message):not(#subject)").each((function(){let t=$(this),a=t.attr("id"),o=regex[a],s=replaceSpecialChars(t.val());o.test(s)?o.test(s)&&console.log(`${a}: ${s}`):(addRequired(t),e.push(`Error at ${a}: ${s} is not a good value`))})),checkError(e),$("#message, #subject").each((function(){let e=$(this).val();if(""!=e){e.match(/([^\.!\?]+[\.!\?]+)|([^\.!\?]+$)/g).forEach((e=>{(e=replaceSpecialChars(e)).replace(/(\r\n|\n|\r)/gm,"")}))}})),console.log("Valid form, ready for PHP");let t=replaceSpecialChars($("#fname").val());$(".thanks").text(`Thank you ${t}!`).slideDown().delay(2e3).slideUp(),resetForm()}catch(e){e.forEach((e=>{console.log(e)}))}}function resetForm(){$(".form")[0].reset(),$("#message").attr("style","").val(""),$("#message").css("style","height:"+$("#message")[0].scrollHeight+"px;"),$("label[for='message']").text(`0 / ${$("#message").attr("maxlength")}`)}function update_sections(){$("main section, main section article").each((function(){var e=$(this).position().top,t=$(this).position().top+$(this).outerHeight(),a=$(window).height()/3,o=$(window).scrollTop()+a,s=$(window).scrollTop()+2*a;e>s&&t>s||e<o&&t<o?$(this).stop(!0).animate({opacity:"0"},500):$(this).stop(!0).animate({opacity:"1"},500)}))}function toggleMenu(){$(".hamburger").toggleClass("is-active"),$(".hamburger").hasClass("is-active")?($("nav").slideDown(),$(".burger").css("margin-left",$("nav").width()),$("main").prepend('<div class="black-out d-lg-none">')):($("nav").slideUp(),$(".burger").css("margin-left",0),$(".black-out").remove())}$("#message").on("input",(function(){this.style.height="auto",this.style.height=this.scrollHeight+"px";var e=$(this).attr("maxlength"),t=$(this).val().length;$("label[for='message']").text(t>=e?"Max characters":`${t} / ${e}`)})),$((function(){$(".form").length&&(resetForm(),$(".thanks").hide())})),$(document).ready((function(){$(window).scrollTop(0),update_sections()})),$(window).scroll((function(){update_sections()})),$(document).ready((function(){$("nav").hide().removeClass("d-none"),$(".hamburger").on("click",(function(e){toggleMenu()}))})),$(document).mouseup((function(e){$(".hamburger").hasClass("is-active")&&e.pageX>$("nav").width()&&!$(".burger").find("*").is(e.target)&&toggleMenu()})),$((function(){const e=e=>new Promise((t=>setTimeout(t,e)));jQuery(".typewriter").each((function(){var t=$(this);const a=t.text();(async(t,a)=>{t.text("");for(const r of a)t.text(t.text()+r),await e((o=50,s=400,Math.floor(Math.random()*(s-o+1)+o)));var o,s})(t,a)}))}));